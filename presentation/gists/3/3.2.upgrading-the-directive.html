Complexities behind upgrading directives

The definition of directive has mutated.

First attempt, upgrading.